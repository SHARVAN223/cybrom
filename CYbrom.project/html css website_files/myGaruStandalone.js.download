//2.0.5
window.mygaru=window.mygaru||{};var n=window.mygaru;n.cmd=n.cmd||[];n.cmd.push=s;function s(...r){return r.forEach((t)=>{try{t&&t()}catch(e){console.error("Error executing que function",e)}}),r.length}function d(){if(n.cmd.length)for(let r=0;r<n.cmd.length;r++){let t=n.cmd[r];if(t&&typeof t==="function")s(t)}}function u(r){let t=new URL("https://ident.mygaru.com/v2/id");return t.searchParams.append("partner_id",r),fetch(t.toString(),{method:"GET",credentials:"include"}).then((e)=>e.json()).then(({otp:e})=>{return e})}function i(r){let t={p:r.partnerId,page:window.location.href,tte:r.tteMS,err:r.error??void 0},e=new URL("https://tracking.mygaru.com/ident/");Object.entries(t).forEach(([m,c])=>{if(c!==void 0)e.searchParams.append(m,encodeURIComponent(c))}),fetch(e.toString()).catch(()=>{})}function a(){if(window.performance&&window.performance.now)return window.performance.now();return Date.now()}class o{partnerId;token;constructor(r){if(!r)throw new Error("partnerId is required");return this.partnerId=r,this.token="",this}ident(){let r=a();return u(this.partnerId).then((t)=>{this.token=t,i({partnerId:this.partnerId,tteMS:Math.round(a()-r)})}).then(()=>{return this.token}).catch((t)=>{return i({partnerId:this.partnerId,error:t.message,tteMS:Math.round(a()-r)}),""})}}function p(r){try{if(window.googletag=window.googletag||{},!googletag.secureSignalProviders)googletag.secureSignalProviders=[];googletag.secureSignalProviders.push({id:"mygaruID",collectorFunction:()=>r})}catch(t){}}n.init=(r)=>{return new o(r)};function f(){if(window.location.href.indexOf("helsi.me")>-1)return;let t=new o("abd6fad8-5220-4364-8fd1-052f78594be6");p(t.ident())}(()=>{d(),f()})();
